# Sessions

A "session" is a collection of tabs and sub-windows that can be saved and restored
later. Sessions are useful for saving your work halfway through. To save a session,
click the "File > Session > Save Session ..." menu.

!!! warning

    The session feature is still experimental. The saved session may not be restored
    in some special cases. Please make sure you will not lose your important data.

## How it Works

A session is saved as a zip file suffixed with `.session.zip`. The zip file contains:

1. Files created by writing all the sub-windows in the application.
2. Directories that store the metadata of each data model.
3. `session.yaml` that describes many other states of the application.

During saving the session, `himena` tries to find the best writer plugin to write every
sub-window. Therefore, if any of the windows cannot be written to files, saving the
session will lose the data (or [use workflows](#restore-subset-of-the-data-by-workflows)
to avoid this).

## Make the Session Portable

By default, sub-windows directly read from the local disk will not be saved again in the
session. However, this session will not work on another computer, or if the file is
moved. To make the session portable, you have to check the "save copies" option.

## Restore Subset of the Data by Workflows

Instead of saving a sub-window as a file, you can restore the data by re-running all the
commands needed to generate the data. As each sub-window has its workflow to track its
history, this workflow can be used to restore the data.

In the "Save Session ..." dialog, you can select which command you will allow to be
executed. All the sub-windows that are directly generated by the command will not be
saved as files, but will be restored by the workflow when the session is loaded.

For example, if you have the following workflow:

```
        Command A         Command B
Data X0 --------> Data X1 --------> Data X2
```

and allowed Command A to be executed, the session will save Data X2 if "Save copies" is
not checked, or will save Data X0 and Data X2 if "Save copies" is checked.
